## 银河智投(web)
> 银河智投是个金属交易所网站，主要功能有交易，平仓，出入金，展示行情数据，图示化数据等，地址在[这里](http://yh178178.com)(个人帐号:13266705799，密码:123456)。其中主要用到的技术栈是React+Mobx+Typescript，组件样式是用antd+less。  
-------------------------------------------------------------分割线---------------------------------------------    
1.mobx状态管理库管理数据，实现多组件数据同步，实时更新。  
2.使用typescript增加类型检查，提高开发和维护的效率。  
3.less提取公共样式，cssModules限制组件样式作用域。  
4.黑白主题。  
5.定制股票图表。  
6.按需加载  

1. 股票数据(如最新价,开盘价,收盘价等)需要在界面多处同步显示(如标题，侧边栏，图表等)，而且数据很多需要从实时更新，数据源除了http请求外还有websocket推送。综合以上的需求，在redux，dva和mobx状态管理库中选择了mobx，因为mobx更简便，面向对象+响应式编程，实现数据在多处获取;动态 监听数据变化，一处修改全局修改，实现数据同步;
2. 除了用户数据之外，股票数据包括行情，持仓，成交单，资产，出入金等众多数据，数据类型繁多复杂，而且有些数据需要穿插使用，使得开发容易产生冗余和出错而且难以维护。所以引入typescript静态类型检查，增加interface，明确数据变量的类型，再加上IDE的只能提示，可以提高开发和维护的效率，而且在组件复用上也能对props进行检查。
3. 因为股票红涨绿跌红买绿卖的特性和设计图的风格，所以使用less设置红绿样式（包括字体，背景和边框 ）和常用字体颜色等为基本变量，减少重复样式。然后使用cssModules限制组件样式的作用域，防止样式污染。
4. 使用react-helmet开源库动态修改body的class（如‘light’变成‘dark’）,然后为每个组件的样式都增加一个dark类，并在类下重写当前样式（一般字体和背景需要换色），从而实现样式覆盖达到换肤效果。
5. 图表库使用的是react-stockchart开源库，因为其专业性（只是显示股票图）比echart和highchart要高，图例效果更好，但同时它的扩展性相对较差，文档也不完善。所以定制图表的时候，有时需要阅读源码，甚至在看不懂的时候提issue问作者（定制特定股票指标的时候，因为他的组件props数据格式不明确，导致我不管怎么传参都没有得到想要的效果，最后提issue解决）。
6. 使用react-router和react-loadable库实现根据路由的按需加载。